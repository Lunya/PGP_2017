<div class="container-fluid">
	<div class="jumbotron py-2 mt-3 mb-1">
		<h4 class="display-4">{{ project.name }}</h4>
		<p class="lead">{{ project.description }}</p>
	</div>

	<div class="row">
		<nav class="navbar mb-3">
			<a class="navbar-brand">Backlog</a>
			<form class="form-inline">
				<input type="text" placeholder="Subversionnig repository URL" class="form-control mr-sm-2" value="{{ project.git }}" disabled>

				<button type="button" class="btn btn-secondary mr-sm-2" *ngIf="!addUsMode" (click)="onEdit()">
					<i class="fa fa-plus-circle"></i> Add user story</button>
				<button type="button" class="btn btn-primary mr-sm-2" *ngIf="addUsMode" (click)="onConfirm()">
					<i class="fa fa-check"></i> Confirm</button>
				<button type="button" class="btn btn-secondary mr-sm-2" *ngIf="addUsMode" (click)=onBack()>
					<i class="fa fa-reply"></i></button>

				<button type="button" class="btn mr-sm-2"><i class="fa fa-edit"></i>Edit project</button>
				<button type="button" class="btn btn-danger"><i class="fa fa-trash"></i> Delete project</button>
			</form>
		</nav>
	</div>

	<div class="row">
		<div class="col-md-12">
			<!-- <form class="form-inline form-repository" [formGroup]="userStoryForm" (ngSubmit)="ngOnSubmit()" novalidate> -->
			<!-- <table class="table" formArrayName="backlog"> -->
			<table class="table table-bordered table-striped table-hover">
				<thead>
					<tr>
						<th class='id'>ID</th>
						<th class='description'>Description</th>
						<th>Difficulty</th>
						<th>Priority</th>
						<th>Status</th>
						<th class='columnAction'>Action</th>
					</tr>
				</thead>
				<tbody>
					<tr *ngIf='addUsMode' class="table-primary">
						<td></td>
						<td contenteditable='true' class="description" [(ngModel)]="userStory.description" #description="ngModel"></td>
						<td contenteditable='true' [(ngModel)]="userStory.difficulty" #difficulty="ngModel"></td>
						<td contenteditable='true' [(ngModel)]="userStory.priority" #priority="ngModel"></td>
						<td contenteditable='true' [(ngModel)]="userStory.state" #state="ngModel"></td>
						<td>
							<button class="btn" disabled><i class="fa fa-edit"></i> Edit</button>
							<button class="btn btn-danger" disabled><i class="fa fa-times"></i> </button>
						</td>
					</tr>
					<ng-container *ngFor="let us of usList">
						<tr id="{{ 'US' + us.id  }}" (click)="selectUS(us)">
							<td>{{us.id}}</td>
							<td contenteditable='false' class="editable description" [(ngModel)]="us.description" #description="ngModel">{{us.description}}</td>
							<td contenteditable='false' class="editable" [(ngModel)]="us.difficulty" #difficulty="ngModel">{{us.difficulty}}</td>
							<td contenteditable='false' class="editable" [(ngModel)]="us.priority" #priority="ngModel">{{us.priority}}</td>
							<td contenteditable='false' class="editable" [(ngModel)]="us.state" #state="ngModel">{{us.state}}</td>
							<td>
								<button *ngIf='!us.onEdit' class="btn btn-default" (click)="onEditRow(us)"><i class="fa fa-edit"></i> Edit</button>
								<button *ngIf='!us.onEdit' class="btn btn-danger" (click)="onDeleteRow(us)"><i class="fa fa-times"></i> </button>
								<button *ngIf='us.onEdit' class="btn" (click)="onBackRow(us)"><i class="fa fa-reply"></i> Back</button>
								<button *ngIf='us.onEdit' class="btn btn-primary" (click)="onConfirmRow(us)"><i class="fa fa-check-square"></i> Confirm</button>
							</td>
						</tr>
					</ng-container>
				</tbody>
			</table>
			<!-- </form> -->
		</div>
	</div>
</div>
